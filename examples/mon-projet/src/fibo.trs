import { Instant } from "trusty:time";

function fibonacci(n: int64): int64 {
    if (n <= 1) {
        return n;
    }

    var a: int64 = 0;
    var b: int64 = 1;

    for (var i: int64 = 2; i <= n; i = i + 1) {
        var next: int64 = a + b;
        a = b;
        b = next;
    }

    return b;
}

function main() {
    console.write("=== Fibonacci Demo ===");
    var start = Instant.now();
    var result = fibonacci(50);
    var elapsed = start.elapsed();
    var ns = elapsed.asNanos();
    console.write(`Result: ${result}`);
    console.write(`TRUST time: ${ns} ns`);
}
